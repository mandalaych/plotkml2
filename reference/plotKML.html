<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Methods for plotting results of spatial analysis in Google Earth — plotKML-method • plotKML</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Methods for plotting results of spatial analysis in Google Earth — plotKML-method"><meta property="og:description" content="The method writes inputs and outputs of spatial analysis (a list of point, gridded and/or polygon data usually) to KML and opens the KML file in Google Earth (or any other default package used to view KML/KMZ files)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plotKML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Envirometrix/plotKML/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Methods for plotting results of spatial analysis in Google Earth</h1>
    
    <div class="hidden name"><code>plotKML.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The method writes inputs and outputs of spatial analysis (a list of point, gridded and/or polygon data usually) to KML and opens the KML file in Google Earth (or any other default package used to view KML/KMZ files).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for sf</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialPointsDataFrame</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">size</span>, <span class="va">colour</span>, <span class="va">points_names</span>, </span>
<span>      shape <span class="op">=</span> <span class="st">"http://maps.google.com/mapfiles/kml/pal2/icon18.png"</span>, </span>
<span>      metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialLinesDataFrame</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>,</span>
<span>      metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialPolygonsDataFrame</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, <span class="va">plot.labpt</span>, <span class="va">labels</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialPixelsDataFrame</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, <span class="va">raster_name</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="cn">FALSE</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialGridDataFrame</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, <span class="va">raster_name</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="cn">FALSE</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for RasterLayer</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, <span class="va">raster_name</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="cn">FALSE</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialPhotoOverlay</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">dae.name</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SoilProfileCollection</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">var.name</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, </span>
<span>      open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for STIDF</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, shape <span class="op">=</span> <span class="st">"http://maps.google.com/mapfiles/kml/pal2/icon18.png"</span>, </span>
<span>      <span class="va">points_names</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for STFDF</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for STSDF</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for STTDF</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      <span class="va">colour</span>, start.icon <span class="op">=</span> <span class="st">"http://maps.google.com/mapfiles/kml/pal2/icon18.png"</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for RasterBrickTimeSeries</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>,</span>
<span>      pngwidth <span class="op">=</span> <span class="fl">680</span>, pngheight <span class="op">=</span> <span class="fl">180</span>, pngpointsize <span class="op">=</span> <span class="fl">14</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for RasterBrickSimulations</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      obj.summary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      pngwidth <span class="op">=</span> <span class="fl">680</span>, pngheight <span class="op">=</span> <span class="fl">200</span>, pngpointsize <span class="op">=</span> <span class="fl">14</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialMaxEntOutput</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      html.file <span class="op">=</span> <span class="va">obj</span><span class="op">@</span><span class="va">maxent</span><span class="op">@</span><span class="va">html</span>, </span>
<span>      iframe.width <span class="op">=</span> <span class="fl">800</span>, iframe.height <span class="op">=</span> <span class="fl">800</span>, pngwidth <span class="op">=</span> <span class="fl">280</span>, </span>
<span>      pngheight <span class="op">=</span> <span class="fl">280</span>, pngpointsize <span class="op">=</span> <span class="fl">14</span>, <span class="va">colour</span>, </span>
<span>      shape <span class="op">=</span> <span class="st">"http://plotkml.r-forge.r-project.org/icon17.png"</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>      TimeSpan.begin <span class="op">=</span> <span class="va">obj</span><span class="op">@</span><span class="va">TimeSpan.begin</span>, TimeSpan.end <span class="op">=</span> <span class="va">obj</span><span class="op">@</span><span class="va">TimeSpan.end</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialPredictions</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, <span class="va">colour</span>, </span>
<span>      grid2poly <span class="op">=</span> <span class="cn">FALSE</span>, obj.summary <span class="op">=</span> <span class="cn">FALSE</span>, plot.svar <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>      pngwidth <span class="op">=</span> <span class="fl">210</span>, pngheight <span class="op">=</span> <span class="fl">580</span>, pngpointsize <span class="op">=</span> <span class="fl">14</span>, </span>
<span>      metadata <span class="op">=</span> <span class="cn">NULL</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialSamplingPattern</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>,</span>
<span>      <span class="va">colour</span>, kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for SpatialVectorsSimulations</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, <span class="va">colour</span>, </span>
<span>      grid2poly <span class="op">=</span> <span class="cn">FALSE</span>, obj.summary <span class="op">=</span> <span class="cn">TRUE</span>, plot.svar <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S4 method for list</span></span>
<span><span class="fu">plotKML</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>      folder.name <span class="op">=</span> <span class="fu"><a href="normalizeFilename.html">normalizeFilename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span>, env<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      file.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">folder.name</span>, <span class="st">".kml"</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, </span>
<span>      size <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">colour</span>, points_names <span class="op">=</span> <span class="st">""</span>,</span>
<span>      shape <span class="op">=</span> <span class="st">"http://maps.google.com/mapfiles/kml/pal2/icon18.png"</span>,</span>
<span>      plot.labpt <span class="op">=</span> <span class="cn">TRUE</span>, labels <span class="op">=</span> <span class="st">""</span>, metadata <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>      kmz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"kmz"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, open.kml <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obj</dt>
<dd><p>input object of specific class; either some <a href="https://cran.r-project.org/package=sf" class="external-link">sf</a>, or <a href="https://cran.r-project.org/package=sp" class="external-link">sp</a>, or <a href="https://cran.r-project.org/package=raster" class="external-link">raster</a> or <a href="https://cran.r-project.org/package=spacetime" class="external-link">spacetime</a> package class object, or plotKML composite objects containing both inputs and outputs of analysis</p></dd>

  <dt>folder.name</dt>
<dd><p>character; folder name in the KML file</p></dd>

  <dt>file.name</dt>
<dd><p>character; output KML file name</p></dd>

  <dt>size</dt>
<dd><p>for point objects for plotting (see <a href="aesthetics.html">aesthetics</a>)</p></dd>

  <dt>colour</dt>
<dd><p>colour variable for plotting (see <a href="aesthetics.html">aesthetics</a>)</p></dd>

  <dt>points_names</dt>
<dd><p>vector of characters that can be used as labels</p></dd>

  <dt>shape</dt>
<dd><p>character; icons used for plotting (see <a href="aesthetics.html">aesthetics</a>)</p></dd>

  <dt>raster_name</dt>
<dd><p>(optional) specify the output file name (PNG)</p></dd>

  <dt>var.name</dt>
<dd><p>target variable name (only valid for visualization of <code>"SoilProfileCollection"</code> class data</p></dd>

  <dt>metadata</dt>
<dd><p>(optional) the metadata object</p></dd>

  <dt>plot.labpt</dt>
<dd><p>logical; specifies whether to plot centroids for polygon data</p></dd>

  <dt>labels</dt>
<dd><p>character vector; list of labels that will attached to the centroids</p></dd>

  <dt>start.icon</dt>
<dd><p>icon for the start position (for trajectory data)</p></dd>

  <dt>dae.name</dt>
<dd><p>output DAE file name</p></dd>

  <dt>html.file</dt>
<dd><p>specify the location of the html file containing report data (if the input object is of class <code>"SpatialMaxEntOutput"</code>)</p></dd>

  <dt>iframe.width</dt>
<dd><p>integer; width of the screen for iframe</p></dd>

  <dt>iframe.height</dt>
<dd><p>integer; height of the screen for iframe</p></dd>

  <dt>TimeSpan.begin</dt>
<dd><p>object of class <code>"POSIXct"</code>; begin of the sampling period</p></dd>

  <dt>TimeSpan.end</dt>
<dd><p>object of class <code>"POSIXct"</code>; end of the sampling period</p></dd>

  <dt>pngwidth</dt>
<dd><p>integer; width of the PNG plot (screen image)</p></dd>

  <dt>pngheight</dt>
<dd><p>integer; height of the PNG plot (screen image)</p></dd>

  <dt>pngpointsize</dt>
<dd><p>integer; text size in the PNG plot (screen image)</p></dd>

  <dt>grid2poly</dt>
<dd><p>logical; specifies whether to convert gridded object to polygons</p></dd>

  <dt>obj.summary</dt>
<dd><p>logical; specifies whether to print the object summary</p></dd>

  <dt>plot.svar</dt>
<dd><p>logical; specifies whether to plot the model uncertainty</p></dd>

  <dt>kmz</dt>
<dd><p>logical; specifies whether to compress the output KML file</p></dd>

  <dt>open.kml</dt>
<dd><p>logical; specifies whether to directly open the output KML file (i.e. in Google Earth)</p></dd>

  <dt>...</dt>
<dd><p>(optional) arguments passed to the lower level functions</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This is a generic function to plot various spatial and spatio-temporal R objects that contain both inputs and outputs of spatial analysis. The resulting plots (referred to as <em>`views'</em>) are expected to be cartographically complete as they should contain legends, and data and model descriptions. In principle, <code>plotKML</code> works with both simple spatial objects, and complex objects such as <code>"SpatialPredictions"</code>, <code>"SpatialVectorsSimulations"</code>, <code>"RasterBrickSimulations"</code>, <code>"RasterBrickTimeSeries"</code>, <code>"SpatialMaxEntOutput"</code> and similar. To further customize visualizations consider combining the lower level functions <code><a href="kml_open.html">kml_open</a></code>, <code><a href="kml_open.html">kml_close</a></code>, <code><a href="kml_compress.html">kml_compress</a></code>, <code><a href="kml_screen.html">kml_screen</a></code> into your own <code>plotKML()</code> method.</p>
<p>All ST-classes are coerced to the STIDF format and hence use the plotKML method for STIDFs.
The <code>sf</code> objects are processed according to the class of the geometry column. The aestethics are defined in the same way as for their sp counterparts.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>To prepare a list of objects of class <code>"SpatialPointsDataFrame"</code>, <code>"SpatialLinesDataFrame"</code>, <code>"SpatialPolygonsDataFrame"</code>, or <code>"SpatialPixelsDataFrame"</code> consider using the <code><a href="https://rdrr.io/pkg/landmap/man/tile-methods.html" class="external-link">landmap::tile</a></code> function. Writting large spatial objects via plotKML can be time consuming. Please refer to the package manual for more information.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="SpatialPredictions.html">SpatialPredictions-class</a></code>, <code><a href="SpatialVectorsSimulations.html">SpatialVectorsSimulations-class</a></code>, <code><a href="RasterBrickSimulations.html">RasterBrickSimulations-class</a></code>, <code><a href="RasterBrickTimeSeries.html">RasterBrickTimeSeries-class</a></code>, <code><a href="SpatialMaxEntOutput.html">SpatialMaxEntOutput-class</a></code>, <code><a href="SpatialSamplingPattern.html">SpatialSamplingPattern-class</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="plotKML.env.html">plotKML.env</a></span><span class="op">(</span>kmz <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $colour_scale_numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#2C7BB6" "#ABD9E9" "#FFFFBF" "#FDAE61" "#D7191C"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $colour_scale_factor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#E41A1C" "#377EB8" "#4DAF4A" "#984EA3" "#FF7F00" "#FFFF33" "#A65628"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [8] "#F781BF" "#999999"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $colour_scale_svar</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#FEEDDE" "#FDBE85" "#FD8D3C" "#E6550D" "#A63603"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ref_CRS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "+proj=longlat +datum=WGS84 +no_defs"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $NAflag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -99999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $icon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "icon3.png"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $LabelScale</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $size_range</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.25 2.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $license_url</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "http://creativecommons.org/licenses/by/4.0/"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $metadata_sel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "idinfo.citation.citeinfo.title"                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "idinfo.descript.abstract"                                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "spdoinfo.ptvctinf.sdtsterm.ptvctcnt"                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "idinfo.timeperd.timeinfo.rngdates.begdate"                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "idinfo.timeperd.timeinfo.rngdates.enddate"                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "distinfo.stdorder.digform.digtopt.onlinopt.computer.networka.networkr"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "idinfo.citation.citeinfo.othercit"                                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "idinfo.citation.citeinfo.onlink"                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "idinfo.datacred"                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "distinfo.distrib.cntinfo.cntorgp.cntorg"                              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "distinfo.stdorder.digform.digtinfo.formcont"                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "idinfo.native"                                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kmz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kml_xsd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://schemas.opengis.net/kml/2.2.0/ogckml22.xsd"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kml_url</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://www.opengis.net/kml/2.2/"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $kml_gx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://www.google.com/kml/ext/2.2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $gpx_xsd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://www.topografix.com/GPX/1/1/gpx.xsd"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fgdc_xsd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://fgdcxml.sourceforge.net/schema/fgdc-std-012-2002/fgdc-std-012-2002.xsd"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $inspire_xsd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://inspire.ec.europa.eu/schemas/common/1.0/common.xsd"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $convert</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $gdalwarp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $gdal_translate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $python</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $home_url</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "https://plotkml.r-forge.r-project.org/"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## -------------- SpatialPointsDataFrame --------- ##</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://rgdal.r-forge.r-project.org" class="external-link">rgdal</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">X</span><span class="op">+</span><span class="va">Y</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+init=epsg:31467"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## subset to 20 percent:</span></span></span>
<span class="r-in"><span><span class="va">eberg</span> <span class="op">&lt;-</span> <span class="va">eberg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">)</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">.1</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">## bubble type plot:</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg</span><span class="op">[</span><span class="st">"CLYMHT_A"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg</span><span class="op">[</span><span class="st">"CLYMHT_A"</span><span class="op">]</span>, colour_scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"#FFFF00"</span>, <span class="fl">2</span><span class="op">)</span>, points_names<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting the first variable on the list</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> KML file opened for writing...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>CRS object has comment, which is lost in output; in tests, see</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reprojecting to +proj=longlat +datum=WGS84 +no_defs ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing to KML...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Closing  eberg__CLYMHT_A__.kml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## plot points with a legend:</span></span></span>
<span class="r-in"><span><span class="va">shape</span> <span class="op">=</span> <span class="st">"http://maps.google.com/mapfiles/kml/pal2/icon18.png"</span> </span></span>
<span class="r-in"><span><span class="va">kml.file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/eberg_CLYMHT_A.kml"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">leg.file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">kml.file</span><span class="op">)</span>, <span class="st">"/kml_legend.png"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml_open.html">kml_open</a></span><span class="op">(</span><span class="va">kml.file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> KML file opened for writing...</span>
<span class="r-in"><span><span class="fu"><a href="kml_layer.html">kml_layer</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">[</span><span class="st">"CLYMHT_A"</span><span class="op">]</span>, colour<span class="op">=</span><span class="va">CLYMHT_A</span>, z.lim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          colour_scale<span class="op">=</span><span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, shape<span class="op">=</span><span class="va">shape</span>, points_names<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>CRS object has comment, which is lost in output; in tests, see</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reprojecting to +proj=longlat +datum=WGS84 +no_defs ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing to KML...</span>
<span class="r-in"><span><span class="fu"><a href="kml_legend.bar.html">kml_legend.bar</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">eberg</span><span class="op">$</span><span class="va">CLYMHT_A</span>, </span></span>
<span class="r-in"><span>               legend.file<span class="op">=</span><span class="va">leg.file</span>,</span></span>
<span class="r-in"><span>               legend.pal<span class="op">=</span><span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, z.lim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">60</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml_screen.html">kml_screen</a></span><span class="op">(</span>image.file<span class="op">=</span><span class="va">leg.file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml_open.html">kml_close</a></span><span class="op">(</span><span class="va">kml.file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Closing  C:\Users\shs\AppData\Local\Temp\RtmpiQO1Iy/eberg_CLYMHT_A.kml</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ----- sf objects with sfc_POINT geometry ----- ##</span></span></span>
<span class="r-in"><span><span class="va">eberg_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">eberg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_sf</span><span class="op">[</span><span class="st">"CLYMHT_A"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_sf</span><span class="op">[</span><span class="st">"CLYMHT_A"</span><span class="op">]</span>, colour_scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"#FFFF00"</span>, <span class="fl">2</span><span class="op">)</span>, points_names <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialLinesDataFrame --------- ##</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eberg_contours</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_contours</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## plot contour lines with actual altitudes:</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_contours</span>, colour<span class="op">=</span><span class="va">Z</span>, altitude<span class="op">=</span><span class="va">Z</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ---- sf objects with sfc_LINESTRING geometry ---- ##</span></span></span>
<span class="r-in"><span><span class="va">eberg_contours_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">eberg_contours</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_contours_sf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_contours_sf</span>, colour <span class="op">=</span> <span class="va">Z</span>, altitude <span class="op">=</span> <span class="va">Z</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialPolygonsDataFrame --------- ##</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">[</span><span class="st">"ZONES"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## add altitude:</span></span></span>
<span class="r-in"><span><span class="va">zmin</span> <span class="op">=</span> <span class="fl">230</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">[</span><span class="st">"ZONES"</span><span class="op">]</span>, altitude<span class="op">=</span><span class="va">zmin</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------ sf objects with sfc_POLYGON geometry ------ ##</span></span></span>
<span class="r-in"><span><span class="va">eberg_zones_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_zones_sf</span><span class="op">[</span><span class="st">"ZONES"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg_zones_sf</span><span class="op">[</span><span class="st">"ZONES"</span><span class="op">]</span>, altitude <span class="op">=</span> <span class="va">zmin</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">eberg_zones</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialPixelsDataFrame --------- ##</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://rgdal.r-forge.r-project.org" class="external-link">rgdal</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">x</span><span class="op">+</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+init=epsg:31467"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TWI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reproject.html">reproject</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">[</span><span class="st">"TWISRT6"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reprojecting to +proj=longlat +datum=WGS84 +no_defs ...</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SAGA_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">## set limits manually (increase resolution):</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">TWI</span>, colour_scale <span class="op">=</span> <span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">TWI</span>, z.lim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">20</span><span class="op">)</span>, colour_scale <span class="op">=</span> <span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting the first variable on the list</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> KML file opened for writing...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>CRS object has comment, which is lost in output; in tests, see</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>CRS object has comment, which is lost in output; in tests, see</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing to KML...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Closing  TWI.kml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## categorical data:</span></span></span>
<span class="r-in"><span><span class="va">eberg_grid</span><span class="op">$</span><span class="va">LNCCOR6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">$</span><span class="va">LNCCOR6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">$</span><span class="va">LNCCOR6</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "112 - Discontinuous urban fabric"   "211 - Non-irrigated arable land"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "231 - Pastures"                     "242 - Complex cultivation patterns"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "311 - Broad-leaved forest"          "312 - Coniferous forest"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "313 - Mixed forest"                </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">worldgrids_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## attr(worldgrids_pal["corine2k"][[1]], "names")</span></span></span>
<span class="r-in"><span><span class="va">pal</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">worldgrids_pal</span><span class="op">[</span><span class="st">"corine2k"</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">11</span>,<span class="fl">13</span>,<span class="fl">14</span>,<span class="fl">16</span>,<span class="fl">17</span>,<span class="fl">18</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">LNCCOR6</span> <span class="op">&lt;-</span> <span class="fu"><a href="reproject.html">reproject</a></span><span class="op">(</span><span class="va">eberg_grid</span><span class="op">[</span><span class="st">"LNCCOR6"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reprojecting to +proj=longlat +datum=WGS84 +no_defs ...</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">LNCCOR6</span>, colour_scale<span class="op">=</span><span class="va">pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialPhotoOverlay --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RCurl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">imagename</span> <span class="op">=</span> <span class="st">"Soil_monolith.jpg"</span></span></span>
<span class="r-in"><span><span class="va">urlExists</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/RCurl/man/url.exists.html" class="external-link">url.exists</a></span><span class="op">(</span><span class="st">"https://commons.wikimedia.org"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="va">urlExists</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="getWikimedia.html">getWikiMedia.ImageInfo</a></span><span class="op">(</span><span class="va">imagename</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">sm</span> <span class="op">&lt;-</span> <span class="fu"><a href="spPhoto.html">spPhoto</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">x1</span><span class="op">$</span><span class="va">url</span><span class="op">$</span><span class="va">url</span>, exif.info <span class="op">=</span> <span class="va">x1</span><span class="op">$</span><span class="va">metadata</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># str(sm)</span></span></span>
<span class="r-in"><span>  <span class="fu">plotKML</span><span class="op">(</span><span class="va">sm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SoilProfileCollection --------- ##</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ncss-tech/aqp" class="external-link">aqp</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This is aqp 1.42</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: 'aqp'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from 'package:raster':</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     metadata, metadata&lt;-</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr" class="external-link">plyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## sample profile from Nigeria:</span></span></span>
<span class="r-in"><span><span class="va">lon</span> <span class="op">=</span> <span class="fl">3.90</span>; <span class="va">lat</span> <span class="op">=</span> <span class="fl">7.50</span>; <span class="va">id</span> <span class="op">=</span> <span class="st">"ISRIC:NG0017"</span>; <span class="va">FAO1988</span> <span class="op">=</span> <span class="st">"LXp"</span> </span></span>
<span class="r-in"><span><span class="va">top</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span>, <span class="fl">36</span>, <span class="fl">65</span>, <span class="fl">87</span>, <span class="fl">127</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">bottom</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">36</span>, <span class="fl">65</span>, <span class="fl">87</span>, <span class="fl">127</span>, <span class="fl">181</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ORCDRC</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18.4</span>, <span class="fl">4.4</span>, <span class="fl">3.6</span>, <span class="fl">3.6</span>, <span class="fl">3.2</span>, <span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">hue</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"7.5YR"</span>, <span class="st">"7.5YR"</span>, <span class="st">"2.5YR"</span>, <span class="st">"5YR"</span>, <span class="st">"5YR"</span>, <span class="st">"10YR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">value</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>; <span class="va">chroma</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## prepare a SoilProfileCollection:</span></span></span>
<span class="r-in"><span><span class="va">prof1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/join.html" class="external-link">join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">top</span>, <span class="va">bottom</span>, <span class="va">ORCDRC</span>, <span class="va">hue</span>, <span class="va">value</span>, <span class="va">chroma</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">lon</span>, <span class="va">lat</span>, <span class="va">FAO1988</span><span class="op">)</span>, type<span class="op">=</span><span class="st">'inner'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining by: id</span>
<span class="r-in"><span><span class="va">prof1</span><span class="op">$</span><span class="va">soil_color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">prof1</span>, <span class="fu"><a href="https://rdrr.io/pkg/aqp/man/munsell2rgb.html" class="external-link">munsell2rgb</a></span><span class="op">(</span><span class="va">hue</span>, <span class="va">value</span>, <span class="va">chroma</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">depths</span><span class="op">(</span><span class="va">prof1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">id</span> <span class="op">~</span> <span class="va">top</span> <span class="op">+</span> <span class="va">bottom</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/aqp/man/site.html" class="external-link">site</a></span><span class="op">(</span><span class="va">prof1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">lon</span> <span class="op">+</span> <span class="va">lat</span> <span class="op">+</span> <span class="va">FAO1988</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">prof1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">lon</span> <span class="op">+</span> <span class="va">lat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">prof1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prof1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SoilProfileCollection with 1 profiles and 6 horizons</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> profile ID: id  |  horizon ID: hzID </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Depth range: 181 - 181 cm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Horizons (6 / 6 rows  |  9 / 9 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            id hzID top bottom ORCDRC   hue value chroma soil_color</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    1   0     18   18.4 7.5YR     3      2  #564436FF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    2  18     36    4.4 7.5YR     4      4  #7D593AFF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    3  36     65    3.6 2.5YR     5      6  #A96B4FFF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    4  65     87    3.6   5YR     5      8  #AF6932FF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    5  87    127    3.2   5YR     5      4  #997259FF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017    6 127    181    1.2  10YR     7      3  #C4AC8CFF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Sites (1 / 1 rows  |  2 / 2 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            id FAO1988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ISRIC:NG0017     LXp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     min max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lon 3.9 3.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lat 7.5 7.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CRS:  +proj=longlat +datum=WGS84 +no_defs</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">prof1</span>, var.name<span class="op">=</span><span class="st">"ORCDRC"</span>, color.name<span class="op">=</span><span class="st">"soil_color"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- STIDF --------- ##</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/spacetime" class="external-link">spacetime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## daily temperatures for Croatia:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## format the time column:</span></span></span>
<span class="r-in"><span><span class="va">HRtemp08</span><span class="op">$</span><span class="va">ctime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">$</span><span class="va">DATE</span>, format<span class="op">=</span><span class="st">"%Y-%m-%dT%H:%M:%SZ"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## create a STIDF object:</span></span></span>
<span class="r-in"><span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer.SpatialPoints.html">SpatialPoints</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lon"</span>,<span class="st">"Lat"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">sp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">HRtemp08.st</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer.STIDF.html">STIDF</a></span><span class="op">(</span><span class="va">sp</span>, time <span class="op">=</span> <span class="va">HRtemp08</span><span class="op">$</span><span class="va">ctime</span>, data <span class="op">=</span> <span class="va">HRtemp08</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAME"</span>,<span class="st">"TEMP"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## subset to first 500 records:</span></span></span>
<span class="r-in"><span><span class="va">HRtemp08_jan</span> <span class="op">&lt;-</span> <span class="va">HRtemp08.st</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">500</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">HRtemp08_jan</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formal class 'STIDF' [package "spacetime"] with 4 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ data   :'data.frame':	500 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ NAME: Factor w/ 158 levels "&lt;c3&gt;&lt;88&gt;akovec",..: 17 50 81 83 84 82 85 86 88 89 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ TEMP: num [1:500] -3.5 -1.25 -4 NA 2.58 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ sp     :Formal class 'SpatialPoints' [package "sp"] with 3 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ coords     : num [1:500, 1:2] 17.2 15.6 17.4 15.5 13.6 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..$ : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..$ : chr [1:2] "Lon" "Lat"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ bbox       : num [1:2, 1:2] 13.6 42.4 19.4 46.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..$ : chr [1:2] "Lon" "Lat"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..$ : chr [1:2] "min" "max"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..@ projargs: chr "+proj=longlat +datum=WGS84 +no_defs"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. .. ..$ comment: chr "GEOGCRS[\"unknown\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.25722"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ time   :An 'xts' object on 2008-01-01 01:00:00/2008-01-04 01:00:00 containing:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Data: int [1:500, 1] 298 433 916 1198 1683 2010 2526 2932 2966 3327 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : chr "timeIndex"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Indexed by objects of class: [POSIXct,POSIXt] TZ: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   xts Attributes:  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ endTime: POSIXct[1:500], format: "2008-01-01 01:00:00" "2008-01-01 01:00:00" ...</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">HRtemp08_jan</span><span class="op">[</span>,,<span class="st">"TEMP"</span><span class="op">]</span>, LabelScale <span class="op">=</span> <span class="fl">.4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## foot-and-mouth disease data:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">fmd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fmd0</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">fmd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">fmd0</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">fmd0</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+init=epsg:27700"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Discarded datum OSGB_1936 in Proj4 definition</span>
<span class="r-in"><span><span class="va">fmd_sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">fmd0</span>, <span class="st">"SpatialPoints"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2001-02-18"</span><span class="op">)</span><span class="op">+</span><span class="va">fmd0</span><span class="op">$</span><span class="va">ReportedDay</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/spacetime" class="external-link">spacetime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fmd_ST</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer.STIDF.html">STIDF</a></span><span class="op">(</span><span class="va">fmd_sp</span>, <span class="va">dates</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ReportedDay<span class="op">=</span><span class="va">fmd0</span><span class="op">$</span><span class="va">ReportedDay</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SAGA_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">fmd_ST</span>, colour_scale<span class="op">=</span><span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- STFDF --------- ##</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## results of krigeST:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/gstat/" class="external-link">gstat</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/spacetime" class="external-link">spacetime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## define space-time variogram</span></span></span>
<span class="r-in"><span><span class="va">sumMetricVgm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gstat/man/vgmST.html" class="external-link">vgmST</a></span><span class="op">(</span><span class="st">"sumMetric"</span>,</span></span>
<span class="r-in"><span>                      space<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/gstat/man/vgm.html" class="external-link">vgm</a></span><span class="op">(</span> <span class="fl">4.4</span>, <span class="st">"Lin"</span>, <span class="fl">196.6</span>,  <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      time <span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/gstat/man/vgm.html" class="external-link">vgm</a></span><span class="op">(</span> <span class="fl">2.2</span>, <span class="st">"Lin"</span>,   <span class="fl">1.1</span>,  <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      joint<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/gstat/man/vgm.html" class="external-link">vgm</a></span><span class="op">(</span><span class="fl">34.6</span>, <span class="st">"Exp"</span>, <span class="fl">136.6</span>, <span class="fl">12</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      stAni<span class="op">=</span><span class="fl">51.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## example from the gstat package:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">air</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rural</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/spacetime/man/STFDF-class.html" class="external-link">STFDF</a></span><span class="op">(</span><span class="va">stations</span>, <span class="va">dates</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>PM10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">air</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">&lt;-</span> <span class="va">rural</span><span class="op">[</span>,<span class="st">"2005-06-01/2005-06-03"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">rr</span>,<span class="st">"STSDF"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">6</span>,to<span class="op">=</span><span class="fl">15</span>,by<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">48</span>,to<span class="op">=</span><span class="fl">55</span>,by<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DE_gridded</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer.SpatialPoints.html">SpatialPoints</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">x1</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">x2</span>,each<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                           proj4string<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">rr</span><span class="op">@</span><span class="va">sp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">DE_gridded</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="va">DE_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/spacetime/man/STFDF-class.html" class="external-link">STF</a></span><span class="op">(</span>sp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">DE_gridded</span>,<span class="st">"SpatialPoints"</span><span class="op">)</span>, time<span class="op">=</span><span class="va">rr</span><span class="op">@</span><span class="va">time</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DE_kriged</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gstat/man/krigeST.html" class="external-link">krigeST</a></span><span class="op">(</span><span class="va">PM10</span><span class="op">~</span><span class="fl">1</span>, data<span class="op">=</span><span class="va">rr</span>, newdata<span class="op">=</span><span class="va">DE_pred</span>,</span></span>
<span class="r-in"><span>                     modelList<span class="op">=</span><span class="va">sumMetricVgm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">DE_kriged</span><span class="op">@</span><span class="va">sp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="co">#stplot(DE_kriged)</span></span></span>
<span class="r-in"><span><span class="co">## plot in Google Earth:</span></span></span>
<span class="r-in"><span><span class="va">z.lim</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">DE_kriged</span><span class="op">@</span><span class="va">data</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">DE_kriged</span>, z.lim<span class="op">=</span><span class="va">z.lim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## add observations points:</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">rr</span>, z.lim<span class="op">=</span><span class="va">z.lim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- STTDF --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://matthewvavrek.com/programs-and-code/fossil/" class="external-link">fossil</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/spacetime" class="external-link">spacetime</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">adehabitatLT</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## format the time column:</span></span></span>
<span class="r-in"><span><span class="va">gpxbtour</span><span class="op">$</span><span class="va">ctime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">$</span><span class="va">time</span>, format<span class="op">=</span><span class="st">"%Y-%m-%dT%H:%M:%SZ"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">lon</span><span class="op">+</span><span class="va">lat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gpxbtour</span><span class="op">$</span><span class="va">dist.km</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">xy</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> </span></span>
<span class="r-in"><span>  <span class="fu">deg.dist</span><span class="op">(</span>long1<span class="op">=</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, lat1<span class="op">=</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, long2<span class="op">=</span><span class="va">xy</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, lat2<span class="op">=</span><span class="va">xy</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## convert to a STTDF class:</span></span></span>
<span class="r-in"><span><span class="va">gpx.ltraj</span> <span class="op">&lt;-</span> <span class="fu">as.ltraj</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">gpxbtour</span><span class="op">)</span>, <span class="va">gpxbtour</span><span class="op">$</span><span class="va">ctime</span>, id <span class="op">=</span> <span class="st">"th"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gpx.st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html" class="external-link">as</a></span><span class="op">(</span><span class="va">gpx.ltraj</span>, <span class="st">"STTDF"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gpx.st</span><span class="op">$</span><span class="va">speed</span> <span class="op">&lt;-</span> <span class="va">gpxbtour</span><span class="op">$</span><span class="va">speed</span></span></span>
<span class="r-in"><span><span class="va">gpx.st</span><span class="op">@</span><span class="va">sp</span><span class="op">@</span><span class="va">proj4string</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">gpx.st</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">gpx.st</span>, colour<span class="op">=</span><span class="st">"speed"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- Spatial Metadata --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">eberg.md</span> <span class="op">&lt;-</span> <span class="fu"><a href="spMetadata.html">spMetadata</a></span><span class="op">(</span><span class="va">eberg</span>, xml.file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"eberg.xml"</span>, package<span class="op">=</span><span class="st">"plotKML"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Target_variable<span class="op">=</span><span class="st">"SNDMHT_A"</span>, Citation_title<span class="op">=</span><span class="st">"Ebergotzen profiles"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">eberg</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,<span class="st">"CLYMHT_A"</span><span class="op">]</span>, metadata<span class="op">=</span><span class="va">eberg.md</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- RasterBrickTimeSeries --------- ##</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">LST</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">LST</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">lon</span><span class="op">+</span><span class="va">lat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">LST</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">LST</span><span class="op">)</span>, <span class="st">"LST"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="va">x</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">datesf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">"%Y_%m_%d"</span><span class="op">)</span>, <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## begin / end dates +/- 4 days:</span></span></span>
<span class="r-in"><span><span class="va">TimeSpan.begin</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">datesf</span><span class="op">)</span><span class="op">)</span><span class="op">-</span><span class="fl">4</span><span class="op">*</span><span class="fl">24</span><span class="op">*</span><span class="fl">60</span><span class="op">*</span><span class="fl">60</span>, origin<span class="op">=</span><span class="st">"1970-01-01"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">TimeSpan.end</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">datesf</span><span class="op">)</span><span class="op">)</span><span class="op">+</span><span class="fl">4</span><span class="op">*</span><span class="fl">24</span><span class="op">*</span><span class="fl">60</span><span class="op">*</span><span class="fl">60</span>, origin<span class="op">=</span><span class="st">"1970-01-01"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## pick climatic stations in the area:</span></span></span>
<span class="r-in"><span><span class="va">pnts</span> <span class="op">&lt;-</span> <span class="va">HRtemp08</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">$</span><span class="va">NAME</span><span class="op">==</span><span class="st">"Pazin"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">pnts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">pnts</span>, <span class="va">HRtemp08</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">$</span><span class="va">NAME</span><span class="op">==</span><span class="st">"Crni Lug - NP Risnjak"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pnts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">pnts</span>, <span class="va">HRtemp08</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">HRtemp08</span><span class="op">$</span><span class="va">NAME</span><span class="op">==</span><span class="st">"Cres"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">pnts</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">Lon</span> <span class="op">+</span> <span class="va">Lat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">pnts</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## get the dates from the file names:</span></span></span>
<span class="r-in"><span><span class="va">LST_ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/brick.html" class="external-link">brick</a></span><span class="op">(</span><span class="va">LST</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">LST_ll</span><span class="op">@</span><span class="va">title</span> <span class="op">=</span> <span class="st">"Time series of MODIS Land Surface Temperature images"</span></span></span>
<span class="r-in"><span><span class="va">LST.ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/new.html" class="external-link">new</a></span><span class="op">(</span><span class="st">"RasterBrickTimeSeries"</span>, variable <span class="op">=</span> <span class="st">"LST"</span>, sampled <span class="op">=</span> <span class="va">pnts</span>, </span></span>
<span class="r-in"><span>    rasters <span class="op">=</span> <span class="va">LST_ll</span>, TimeSpan.begin <span class="op">=</span> <span class="va">TimeSpan.begin</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, </span></span>
<span class="r-in"><span>    TimeSpan.end <span class="op">=</span> <span class="va">TimeSpan.end</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SAGA_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">## plot MODIS images in Google Earth:</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">LST.ts</span>, colour_scale<span class="op">=</span><span class="va">SAGA_pal</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- RasterBrickSimulations --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/gstat/" class="external-link">gstat</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">barxyz</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## define the projection system:</span></span></span>
<span class="r-in"><span><span class="va">prj</span> <span class="op">=</span> <span class="st">"+proj=tmerc +lat_0=0 +lon_0=18 +k=0.9999 +x_0=6500000 +y_0=0 </span></span></span>
<span class="r-in"><span><span class="st">  +ellps=bessel +units=m </span></span></span>
<span class="r-in"><span><span class="st">  +towgs84=550.499,164.116,475.142,5.80967,2.07902,-11.62386,0.99999445824"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">barxyz</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">x</span><span class="op">+</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">barxyz</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="va">prj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">x</span><span class="op">+</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="va">prj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## fit a variogram and generate simulations:</span></span></span>
<span class="r-in"><span><span class="va">Z.ovgm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gstat/man/vgm.html" class="external-link">vgm</a></span><span class="op">(</span>psill<span class="op">=</span><span class="fl">1352</span>, model<span class="op">=</span><span class="st">"Mat"</span>, range<span class="op">=</span><span class="fl">650</span>, nugget<span class="op">=</span><span class="fl">0</span>, kappa<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">barxyz</span><span class="op">$</span><span class="va">Z</span><span class="op">)</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">.2</span>  </span></span>
<span class="r-in"><span><span class="co">## Note: this operation can be time consuming</span></span></span>
<span class="r-in"><span><span class="va">sims</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gstat/man/krige.html" class="external-link">krige</a></span><span class="op">(</span><span class="va">Z</span><span class="op">~</span><span class="fl">1</span>, <span class="va">barxyz</span><span class="op">[</span><span class="va">sel</span>,<span class="op">]</span>, <span class="va">bargrid</span>, model<span class="op">=</span><span class="va">Z.ovgm</span>, nmax<span class="op">=</span><span class="fl">20</span>, </span></span>
<span class="r-in"><span>   nsim<span class="op">=</span><span class="fl">10</span>, debug.level<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## specify the cross-section:</span></span></span>
<span class="r-in"><span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/Line.html" class="external-link">Line</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">bargrid</span><span class="op">@</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span>, <span class="fl">5073012</span>, <span class="fl">5073012</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transect</span> <span class="op">&lt;-</span> <span class="fu"><a href="layer.SpatialLines.html">SpatialLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/Line.html" class="external-link">Lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">t1</span><span class="op">)</span>, ID<span class="op">=</span><span class="st">"t"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="va">prj</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## glue to a RasterBrickSimulations object:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bardem_sims</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/new.html" class="external-link">new</a></span><span class="op">(</span><span class="st">"RasterBrickSimulations"</span>, variable <span class="op">=</span> <span class="st">"elevations"</span>, </span></span>
<span class="r-in"><span>  sampled <span class="op">=</span> <span class="va">transect</span>, realizations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/brick.html" class="external-link">brick</a></span><span class="op">(</span><span class="va">sims</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## plot the whole project and open in Google Earth:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">R_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">bardem_sims</span>, colour_scale <span class="op">=</span> <span class="va">R_pal</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialVectorsSimulations --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">barstr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">x</span><span class="op">+</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">bargrid</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="co">## output topology:</span></span></span>
<span class="r-in"><span><span class="va">cell.size</span> <span class="op">=</span> <span class="va">bargrid</span><span class="op">@</span><span class="va">grid</span><span class="op">@</span><span class="va">cellsize</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">bbox</span> <span class="op">=</span> <span class="va">bargrid</span><span class="op">@</span><span class="va">bbox</span></span></span>
<span class="r-in"><span><span class="va">nrows</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="va">cell.size</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">ncols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="va">cell.size</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gridT</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialGrid.html" class="external-link">GridTopology</a></span><span class="op">(</span>cellcentre.offset<span class="op">=</span><span class="va">bbox</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, </span></span>
<span class="r-in"><span>  cellsize<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cell.size</span>,<span class="va">cell.size</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  cells.dim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nrows</span>, <span class="va">ncols</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bar_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="count.GridTopology.html">count.GridTopology</a></span><span class="op">(</span><span class="va">gridT</span>, vectL<span class="op">=</span><span class="va">barstr</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## NOTE: this operation can be time consuming!</span></span></span>
<span class="r-in"><span><span class="co">## plot the whole project and open in Google Earth:</span></span></span>
<span class="r-in"><span><span class="fu">plotKML</span><span class="op">(</span><span class="va">bar_sum</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -------------- SpatialMaxEntOutput --------- ##</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://maptools.r-forge.r-project.org/" class="external-link">maptools</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://rgdal.r-forge.r-project.org" class="external-link">rgdal</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bigfoot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">aea.prj</span> <span class="op">&lt;-</span> <span class="st">"+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 </span></span></span>
<span class="r-in"><span><span class="st">   +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">USAWgrids</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/gridded-methods.html" class="external-link">gridded</a></span><span class="op">(</span><span class="va">USAWgrids</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">s1</span><span class="op">+</span><span class="va">s2</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">USAWgrids</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="va">aea.prj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html" class="external-link">spTransform</a></span><span class="op">(</span><span class="va">USAWgrids</span>, <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span><span class="op">)</span><span class="op">@</span><span class="va">bbox</span></span></span>
<span class="r-in"><span><span class="va">sel</span> <span class="op">=</span> <span class="va">bigfoot</span><span class="op">$</span><span class="va">Lon</span> <span class="op">&gt;</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&amp;</span> <span class="va">bigfoot</span><span class="op">$</span><span class="va">Lon</span> <span class="op">&lt;</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&amp;</span></span></span>
<span class="r-in"><span>    <span class="va">bigfoot</span><span class="op">$</span><span class="va">Lat</span> <span class="op">&gt;</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&amp;</span> <span class="va">bigfoot</span><span class="op">$</span><span class="va">Lat</span> <span class="op">&lt;</span> <span class="va">bbox</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">bigfoot</span> <span class="op">&lt;-</span> <span class="va">bigfoot</span><span class="op">[</span><span class="va">sel</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">bigfoot</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">Lon</span><span class="op">+</span><span class="va">Lat</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">bigfoot</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://spatstat.org/" class="external-link">spatstat</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bigfoot.aea</span> <span class="op">&lt;-</span> <span class="fu">as.ppp</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html" class="external-link">spTransform</a></span><span class="op">(</span><span class="va">bigfoot</span>, <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="va">aea.prj</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Load the covariates:</span></span></span>
<span class="r-in"><span><span class="va">sel.grids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"globedem"</span>,<span class="st">"nlights03"</span>,<span class="st">"sdroads"</span>,<span class="st">"gcarb"</span>,<span class="st">"twi"</span>,<span class="st">"globcov"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster/sdm/" class="external-link">dismo</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## run MaxEnt analysis:</span></span></span>
<span class="r-in"><span><span class="va">jar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"dismo"</span><span class="op">)</span>, <span class="st">"/java/maxent.jar"</span>, sep<span class="op">=</span><span class="st">''</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">jar</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">bigfoot.smo</span> <span class="op">&lt;-</span> <span class="fu">MaxEnt</span><span class="op">(</span><span class="va">bigfoot.aea</span>, <span class="va">USAWgrids</span><span class="op">[</span><span class="va">sel.grids</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">icon</span> <span class="op">=</span> <span class="st">"http://plotkml.r-forge.r-project.org/bigfoot.png"</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">R_pal</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">plotKML</span><span class="op">(</span><span class="va">bigfoot.smo</span>, colour_scale <span class="op">=</span> <span class="va">R_pal</span><span class="op">[[</span><span class="st">"bpy_colors"</span><span class="op">]</span><span class="op">]</span>, shape <span class="op">=</span> <span class="va">icon</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tomislav Hengl.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

