<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Writes a list of soil profiles to KML — kml_layer.SoilProfileCollection • plotKML</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Writes a list of soil profiles to KML — kml_layer.SoilProfileCollection"><meta property="og:description" content='Writes object of type "SoilProfileCollection" (a number of soil profiles with site and horizon data) to KML. Several attributes such as horizontal and vertical exaggeration can be passed via arguments.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plotKML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Envirometrix/plotKML/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Writes a list of soil profiles to KML</h1>
    
    <div class="hidden name"><code>layer.SoilProfileCollection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Writes object of type <code>"SoilProfileCollection"</code> (a number of soil profiles with site and horizon data) to KML. Several attributes such as horizontal and vertical exaggeration can be passed via arguments.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kml_layer.SoilProfileCollection</span><span class="op">(</span><span class="va">obj</span>, </span>
<span>     <span class="va">var.name</span>, var.min <span class="op">=</span> <span class="fl">0</span>, <span class="va">var.scale</span>, </span>
<span>     site_names <span class="op">=</span> <span class="fu">profile_id</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span>, </span>
<span>     method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"soil_block"</span>, <span class="st">"depth_function"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>     block.size <span class="op">=</span> <span class="fl">100</span>, </span>
<span>     <span class="va">color.name</span>, z.scale <span class="op">=</span> <span class="fl">1</span>, <span class="va">x.min</span>, max.depth <span class="op">=</span> <span class="fl">300</span>,</span>
<span>     plot.points <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>     LabelScale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"LabelScale"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.7</span>,</span>
<span>     IconColor <span class="op">=</span> <span class="st">"#ff0000ff"</span>, </span>
<span>     shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"home_url"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, </span>
<span>         <span class="st">"circlesquare.png"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, </span>
<span>     outline <span class="op">=</span> <span class="cn">TRUE</span>, visibility <span class="op">=</span> <span class="cn">TRUE</span>, extrude <span class="op">=</span> <span class="cn">TRUE</span>, tessellate <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>     altitudeMode <span class="op">=</span> <span class="st">"relativeToGround"</span>, camera.distance <span class="op">=</span> <span class="fl">0.01</span>, </span>
<span>     tilt <span class="op">=</span> <span class="fl">90</span>, heading <span class="op">=</span> <span class="fl">0</span>, roll <span class="op">=</span> <span class="fl">0</span>, </span>
<span>     metadata <span class="op">=</span> <span class="cn">NULL</span>, html.table <span class="op">=</span> <span class="cn">NULL</span>, plot.scalebar <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>     scalebar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"home_url"</span>, envir <span class="op">=</span> <span class="va">plotKML.opts</span><span class="op">)</span>, </span>
<span>         <span class="st">"soilprofile_scalebar.png"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, </span>
<span>     <span class="va">...</span> <span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obj</dt>
<dd><p>object of class <code>"SoilProfileCollection"</code> (package <a href="https://CRAN.R-project.org/package=aqp" class="external-link">aqp</a>)</p></dd>

  <dt>var.name</dt>
<dd><p>target column name in the <code>horizons</code> slot</p></dd>

  <dt>var.min</dt>
<dd><p>smallest value</p></dd>

  <dt>var.scale</dt>
<dd><p>exaggeration in vertical dimension</p></dd>

  <dt>site_names</dt>
<dd><p>site names as listed in the site table</p></dd>

  <dt>method</dt>
<dd><p>visualization type (soil block or depth-function)</p></dd>
  
  <dt>block.size</dt>
<dd><p>(optional) size of the block of land</p></dd>
  
  <dt>color.name</dt>
<dd><p>(optional) column name carrying the color information for each horizon</p></dd>

  <dt>z.scale</dt>
<dd><p>exaggeration in horizontal direction</p></dd>

  <dt>x.min</dt>
<dd><p>offset in longitude direction (in decimal degrees)</p></dd>
  
  <dt>max.depth</dt>
<dd><p>maximum height/depht of a profile in cm</p></dd>

  <dt>plot.points</dt>
<dd><p>logical; specifies whether to plot horizon centres with attribute values</p></dd>

  <dt>LabelScale</dt>
<dd><p>numeric; specifies size of the labels for each horizon</p></dd>

  <dt>IconColor</dt>
<dd><p>colors for the labels for each horizon</p></dd>

  <dt>shape</dt>
<dd><p>default icon for Google placemarks</p></dd>
 
  <dt>outline</dt>
<dd><p>logical; specifies whether to draw outline for the soil-depth functions (or simply a line)</p></dd>
  
  <dt>visibility</dt>
<dd><p>logical; specifies whether to make the layer visible</p></dd>

  <dt>extrude</dt>
<dd><p>logical; specifies whether to extrude horizon centers</p></dd>

  <dt>tessellate</dt>
<dd><p>logical; specifies whether to tessellate polygons</p></dd>

  <dt>altitudeMode</dt>
<dd><p>by default <code>relativeToGround</code></p></dd>
    
  <dt>camera.distance</dt>
<dd><p>distance from a profile in arc degrees</p></dd>

  <dt>tilt</dt>
<dd><p>angle between the direction of the LookAt position and the normal to the surface of the earth</p></dd>
 
  <dt>heading</dt>
<dd><p>orientation towards north</p></dd>
 
  <dt>roll</dt>
<dd><p>rotation about the y axis</p></dd>

  <dt>metadata</dt>
<dd><p>(optional) spatial metadata for the input object</p></dd>

  <dt>html.table</dt>
<dd><p>(optional) tabular content (attributes) for each horizon</p></dd>

  <dt>plot.scalebar</dt>
<dd><p>logical; specifies whether to plot a scale bar next to the profile plot</p></dd>

  <dt>scalebar</dt>
<dd><p>default icon for the scale bar</p></dd>

  <dt>...</dt>
<dd><p>additional style arguments</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Horizon depths are typically expressed in cm, hence the default exaggeration factor (<code>z.scale</code>) is 10. It is highly recommended to turn off the terrain layer in Google Earth, otherwise Google Earth will deform the plots in areas of high relief.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The spatial exaggeration needs to be used because often the detail in the background imagery in Google Earth is limited to a spatial accuracy of 2--20 m, hence there is no point of zooming into objects of size of few meters. These exaggeration factors were selected empirically and will need to be adjusted as the detail in the background imagery increases.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p>Algorithms for Quantitative Pedology (<a href="https://CRAN.r-project.org/package=aqp" class="external-link">https://CRAN.r-project.org/package=aqp</a>)</p></li>
</ul></div>
    <div id="author">
    <h2>Author</h2>
    <p>Tomislav Hengl, Dylan Beaudette and Pierre Roudier</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="layer.SpatialPhotoOverlay.html">kml_layer.SpatialPhotoOverlay</a></code>, <code><a href="plotKML.html">plotKML-method</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">## install.packages("aqp", repos="http://R-Forge.R-project.org")</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ncss-tech/aqp" class="external-link">aqp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://matthewvavrek.com/programs-and-code/fossil/" class="external-link">fossil</a></span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in library(fossil):</span> there is no package called 'fossil'</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr" class="external-link">plyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ca630</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>data set 'ca630' not found</span>
<span class="r-in"><span><span class="co">## Promote to SoilProfileCollection</span></span></span>
<span class="r-in"><span><span class="va">ca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/join.html" class="external-link">join</a></span><span class="op">(</span><span class="va">ca630</span><span class="op">$</span><span class="va">lab</span>, <span class="va">ca630</span><span class="op">$</span><span class="va">site</span>, type<span class="op">=</span><span class="st">'inner'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in intersect(names(x), names(y)):</span> object 'ca630' not found</span>
<span class="r-in"><span><span class="fu">depths</span><span class="op">(</span><span class="va">ca</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">pedon_key</span> <span class="op">~</span> <span class="va">hzn_top</span> <span class="op">+</span> <span class="va">hzn_bot</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in depths(ca) &lt;- pedon_key ~ hzn_top + hzn_bot:</span> object 'ca' not found</span>
<span class="r-in"><span><span class="co">## extract site data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/aqp/man/site.html" class="external-link">site</a></span><span class="op">(</span><span class="va">ca</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">mlra</span> <span class="op">+</span> <span class="va">ssa</span> <span class="op">+</span> <span class="va">lon</span> <span class="op">+</span> <span class="va">lat</span> <span class="op">+</span> <span class="va">cntrl_depth_to_top</span> <span class="op">+</span> <span class="va">cntrl_depth_to_bot</span> <span class="op">+</span> <span class="va">sampled_taxon_name</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in site(ca) &lt;- ~mlra + ssa + lon + lat + cntrl_depth_to_top + cntrl_depth_to_bot +     sampled_taxon_name:</span> object 'ca' not found</span>
<span class="r-in"><span><span class="co"># generate SpatialPoints</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">ca</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">lon</span> <span class="op">+</span> <span class="va">lat</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in coordinates(ca) &lt;- ~lon + lat:</span> object 'ca' not found</span>
<span class="r-in"><span><span class="co">## assign CRS data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/is.projected.html" class="external-link">proj4string</a></span><span class="op">(</span><span class="va">ca</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"+proj=longlat +datum=NAD83"</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in proj4string(ca) &lt;- "+proj=longlat +datum=NAD83":</span> object 'ca' not found</span>
<span class="r-in"><span><span class="co">## plot changes in base saturation by sum of cations method (pH 8.2):</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml.html">kml</a></span><span class="op">(</span><span class="va">ca</span>, method <span class="op">=</span> <span class="st">"depth_function"</span>, file.name <span class="op">=</span> <span class="st">"ca_bs_8_2.kml"</span>, </span></span>
<span class="r-in"><span>  var.name<span class="op">=</span><span class="st">"bs_8.2"</span>, balloon <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'obj' in selecting a method for function 'kml': object 'ca' not found</span>
<span class="r-in"><span><span class="co">## plot changes in cation exchange capacity by sum of cations method (pH 8.2):</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml.html">kml</a></span><span class="op">(</span><span class="va">ca</span>, file.name <span class="op">=</span> <span class="st">"ca_CEC8_2.kml"</span>, var.name<span class="op">=</span><span class="st">"CEC8.2"</span>, IconColor <span class="op">=</span> <span class="st">"#ff009000"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'obj' in selecting a method for function 'kml': object 'ca' not found</span>
<span class="r-in"><span><span class="co">## plot soil profile as 'block':</span></span></span>
<span class="r-in"><span><span class="fu"><a href="kml.html">kml</a></span><span class="op">(</span><span class="va">ca</span>, file.name <span class="op">=</span> <span class="st">"ca_CEC8_2_block.kml"</span>, var.name<span class="op">=</span><span class="st">"CEC8.2"</span>, balloon <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'obj' in selecting a method for function 'kml': object 'ca' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tomislav Hengl.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

