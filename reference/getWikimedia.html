<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Gets EXIF information — getWikiMedia.ImageInfo • plotKML</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Gets EXIF information — getWikiMedia.ImageInfo"><meta property="og:description" content='getWikiMedia.ImageInfo function fetches the EXIF (Exchangeable image file format) data via the Wikimedia API for any donated image. The resulting EXIF data (named list) can then be further used to construct an object of class "SpatialPhotoOverlay", which can be parsed to KML.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plotKML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Envirometrix/plotKML/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Gets EXIF information</h1>
    
    <div class="hidden name"><code>getWikimedia.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>getWikiMedia.ImageInfo</code> function fetches the EXIF (Exchangeable image file format) data via the <a href="https://www.mediawiki.org/wiki/API" class="external-link">Wikimedia API</a> for any donated image. The resulting EXIF data (named list) can then be further used to construct an object of class <code>"SpatialPhotoOverlay"</code>, which can be parsed to KML.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getWikiMedia.ImageInfo</span><span class="op">(</span><span class="va">imagename</span>, </span>
<span>     APIsource <span class="op">=</span> <span class="st">"https://commons.wikimedia.org/w/api.php"</span>, </span>
<span>     module <span class="op">=</span> <span class="st">"imageinfo"</span>, </span>
<span>     details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"url"</span>, <span class="st">"metadata"</span>, <span class="st">"size"</span>, <span class="st">"extlinks"</span><span class="op">)</span>, testURL <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>imagename</dt>
<dd><p>Wikimedia commons unique image title</p></dd>

  <dt>APIsource</dt>
<dd><p>location of the API service</p></dd>

  <dt>module</dt>
<dd><p>default module</p></dd>

  <dt>details</dt>
<dd><p>detailed parameters of interest</p></dd>

  <dt>testURL</dt>
<dd><p>logical; species if the program should first test whether the image exist at all (recommended)</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Although this is often not visible in picture editing programs, almost any image uploaded to Wikimedia contains usefull EXIF metadata. However, it is highly recommended that you insert the some important tags in the image header yourself, by using e.g. the <a href="https://exiftool.org/" class="external-link">EXIF tool</a> (courtesy of Phil Harvey), before uploading the files to Wikimedia. The <code>getWikiMedia.ImageInfo</code> function assumes that all required metadata has already been entered by the user before the upload, hence no further changes in the metadata will be possible. Examples of how to embed EXIF tags into an image file are available <a href="https://commons.wikimedia.org/wiki/Commons:EXIF" class="external-link">here</a>.<br> 
To geocode an uploaded image consider adding:<br></p>
<p><code>{{location|lat deg|lat min|lat sec|NS|long deg|long min|long sec|EW}}</code> <br></p>
<p>tag to the file description, in which case <code>getWikiMedia.ImageInfo</code> will automatically look for the attached coordinates via the external links. For practical purposes and because the image properties information determined by the Wikimedia system can are more reliable, the function will rewrite some important EXIF metadata (image width and height) using the actual values determined by Wikimedia server.<br> 
For a list of modules and parameters that can be used via <code>getWikiMedia.ImageInfo</code>, please refer to <a href="https://www.mediawiki.org/wiki/API" class="external-link">Wikimedia API manual</a>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p>Wikimedia API (<a href="https://www.mediawiki.org/wiki/API" class="external-link">https://www.mediawiki.org/wiki/API</a>)</p></li>
<li><p>EXIF tool (<a href="https://exiftool.org/" class="external-link">https://exiftool.org/</a>)</p></li>
</ul></div>
    <div id="author">
    <h2>Author</h2>
    <p>Tomislav Hengl</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="spPhoto.html">spPhoto</a></code>, <code>Rexif::getExifPy</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># Photo taken using a GPS-enabled camera:</span></span></span>
<span class="r-in"><span><span class="va">imagename</span> <span class="op">=</span> <span class="st">"Africa_Museum_Nijmegen.jpg"</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">getWikiMedia.ImageInfo</span><span class="op">(</span><span class="va">imagename</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in paste("https://commons.wikimedia.org/wiki/File:", imagename,     sep = ""):</span> object 'imagename' not found</span>
<span class="r-in"><span><span class="co"># Get the GPS info:</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">$</span><span class="va">metadata</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">metadata</span><span class="op">)</span>, pattern<span class="op">=</span><span class="st">"GPS"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'x' not found</span>
<span class="r-in"><span><span class="co"># prints the complete list of metadata tags;</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tomislav Hengl.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

